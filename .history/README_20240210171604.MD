# Эмулятор работы языка программирования на ЭВМ

## Цель:

- Экспериментальное знакомство с устройством процессоров через моделирование;
получение опыта работы с компьютерной системой на нескольких уровнях организации, разрешая противоречия между ними.

### Данная лабораторная работа носит практический характер. Она включает разработку:

- языка программирования и транслятора;
- системы команд;
- модели процессора и его принципиальной схемы;
- нескольких алгоритмов (реализация и тестирование работы).

### Дополнительно:

- работа с CI;
- средства автоматического контроля качества кода;
- автоматическое тестирование.

## Вариант

```asm | cisc | harv | mc | tick | struct | trap | port | pstr | prob2 | spi```

```asm``` - синтаксис ассемблера. Необходима поддержка label-ов.

```cisc``` - система команд должна содержать сложные инструкции:
- переменная длина инструкций (некоторые инструкции не помещаются в машинное слово, даже в struct вариантах необходимо делать выборку за несколько шагов в явном виде);
- арифметические операции, работающие с регистрами и памятью за одну операцию;
- работа со специальными регистрами;

```harv``` - Гарвардская архитектура.

```mc``` - microcoded.
- В отчёте необходимо задокументировать уровень микроинструкций.
- Моделирование должно выполняться с точностью до такта.
- Микрокод должен быть сохранён в отдельной памяти для микропрограмм.
- Модель процессора должна исполнять микрокод.

```tick``` - процессор необходимо моделировать с точностью до такта, процесс моделирования может быть приостановлен на любом такте.

```struct``` - в виде высокоуровневой структуры данных. Считается, что одна инструкция укладывается в одно машинное слово, за исключением CISC архитектур.

```trap```

Ввод-вывод осуществляется токенами через систему прерываний. Логика работы:

- при старте модели у вас есть расписание ввода ([(1, 'h'), (10, 'e'), (20, 'l'), (25, 'l'), (100, 'o')], где цифра -- момент поступления данных, символ -- токен);
- процессор имеет систему прерываний:

    - прерывания считаем внутренними;
    - обработка прерывания должна приводить к вызову реализованного пользователем программного кода;
    - обработчик прерывания реализуется программистом на вашем языке;


- в процессе моделирования идёт отсчёт времени в тактах, по наступлении события ввода -- происходит обработка прерывания;
- из журнала работы процессора должно быть ясно, работаете вы в прерывании или нет;
- вывод данных реализуется посимвольно, как в варианте stream, по выполнении команд в буфер вывода добавляется ещё один символ;
- по окончании моделирования показать все выведенные данные;
- ситуация наступления прерывания во время обработки прерывания должна быть проработана (способ -- на ваше усмотрение);
- логика работы с буферами реализуется в рамках модели на Python;
- не стоит путать "вызов прерывания" и "получение данных".

```port``` - port-mapped (специальные инструкции для ввода-вывода)
- адресация портов ввода-вывода должна присутствовать.

